function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(l){r=!0,a=l}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1YPp":function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),r=n("tyNb"),a=n("mrSG"),o=n("AcyG"),c=n("itXk"),l=n("HDdC"),s=n("lJxs"),p=n("DnKK"),u=n("yk+R"),m=n("fXoL"),d=n("dJ3e"),f=n("pLZG"),h=n("uLmn"),g=n("L70B"),v=(n("orVE"),n("F+jL")),y=n("0IaG"),b=n("Wp6s"),w=n("bTqV"),_=n("NFeN");function C(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",7),m["\u0275\u0275listener"]("click",(function(e){m["\u0275\u0275restoreView"](n);var t=m["\u0275\u0275nextContext"](2);return t.addToWishList(t.catalogItem.phone)})),m["\u0275\u0275elementStart"](1,"mat-icon"),m["\u0275\u0275text"](2,"favorite_border"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",7),m["\u0275\u0275listener"]("click",(function(e){m["\u0275\u0275restoreView"](n);var t=m["\u0275\u0275nextContext"](2);return t.removeFromWishList(t.catalogItem.wishId)})),m["\u0275\u0275elementStart"](1,"mat-icon"),m["\u0275\u0275text"](2,"favorite"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function x(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"mat-card",1),m["\u0275\u0275element"](1,"img",2),m["\u0275\u0275elementStart"](2,"div"),m["\u0275\u0275text"](3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div"),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"currency"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",3),m["\u0275\u0275elementStart"](8,"button",4),m["\u0275\u0275listener"]("click",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().onBasketClick()})),m["\u0275\u0275elementStart"](9,"mat-icon"),m["\u0275\u0275text"](10,"shopping_cart"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](11," \u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](12,C,3,0,"button",5),m["\u0275\u0275template"](13,I,3,0,"ng-template",null,6,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var i=m["\u0275\u0275reference"](14),r=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("src",r.catalogItem.phone.image,m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](r.catalogItem.phone.name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind3"](6,5,r.catalogItem.phone.price,"RUB","symbol-narrow")),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",!r.catalogItem.isInWishList)("ngIfElse",i)}}var k,j=((k=function(){function e(t,n){_classCallCheck(this,e),this.store=t,this.dialog=n}return _createClass(e,[{key:"ngOnDestroy",value:function(){}},{key:"onBasketClick",value:function(){var e=this;this.dialog.open(v.a,{data:{phone:this.catalogItem.phone}}).afterClosed().pipe(Object(p.a)(this),Object(f.a)((function(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.amount)})),Object(s.a)((function(e){return e.amount}))).subscribe((function(t){return e.store.dispatch(new h.a(e.catalogItem.phone,t))}))}},{key:"addToWishList",value:function(e){this.store.dispatch(new g.a(e))}},{key:"removeFromWishList",value:function(e){this.store.dispatch(new g.e(e))}}]),e}()).\u0275fac=function(e){return new(e||k)(m["\u0275\u0275directiveInject"](o.f),m["\u0275\u0275directiveInject"](y.b))},k.\u0275cmp=m["\u0275\u0275defineComponent"]({type:k,selectors:[["app-item-card"]],inputs:{catalogItem:"catalogItem"},decls:1,vars:1,consts:[["class","item-card",4,"ngIf"],[1,"item-card"],[3,"src"],[1,"item-card__actions"],["mat-raised-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"click",4,"ngIf","ngIfElse"],["inWishList",""],["mat-icon-button","","color","primary",3,"click"]],template:function(e,t){1&e&&m["\u0275\u0275template"](0,x,15,9,"mat-card",0),2&e&&m["\u0275\u0275property"]("ngIf",t.catalogItem)},directives:[i.l,b.a,w.a,_.a],pipes:[i.d],styles:[".item-card[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:25px;text-align:center;width:200px}.item-card__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}"],changeDetection:0}),k);function O(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",2),m["\u0275\u0275element"](1,"app-item-card",3),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("catalogItem",n)}}var E,S,L=[{path:"",component:(E=function(){function e(t){_classCallCheck(this,e),this.phoneService=t,this.catalog$=Object(c.a)([this.phoneService.getPhones(),this.wishList$]).pipe(Object(p.a)(this),Object(s.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];return n.map((function(e){var t,n=i.find((function(t){return t.phone.id===e.id}));return{phone:e,isInWishList:!!n,wishId:null===(t=n)||void 0===t?void 0:t.id}}))})))}return _createClass(e,[{key:"ngOnDestroy",value:function(){}}]),e}(),E.\u0275fac=function(e){return new(e||E)(m["\u0275\u0275directiveInject"](d.c))},E.\u0275cmp=m["\u0275\u0275defineComponent"]({type:E,selectors:[["ng-component"]],decls:3,vars:3,consts:[[1,"catalog"],["class","catalog__item",4,"ngFor","ngForOf"],[1,"catalog__item"],[3,"catalogItem"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275template"](1,O,2,1,"div",1),m["\u0275\u0275pipe"](2,"async"),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",m["\u0275\u0275pipeBind1"](2,1,t.catalog$)))},directives:[i.k,j],pipes:[i.b],styles:[".catalog[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.catalog__item[_ngcontent-%COMP%]{margin:20px}"],changeDetection:0}),Object(a.a)([Object(o.c)(u.a.wishList),Object(a.b)("design:type",l.a)],E.prototype,"wishList$",void 0),E)}],P=((S=function e(){_classCallCheck(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[r.c.forChild(L)],r.c]}),S),W=n("PCNd"),A=n("4bhA");n.d(t,"CatalogModule",(function(){return V}));var T,V=((T=function e(){_classCallCheck(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:T}),T.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||T)},providers:[d.c,d.a],imports:[[i.c,P,W.a,A.a]]}),T)},orVE:function(e,t){}}]);