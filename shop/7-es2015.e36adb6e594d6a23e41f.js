(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"1YPp":function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),o=n("tyNb"),a=n("mrSG"),c=n("AcyG"),r=n("itXk"),s=n("HDdC"),l=n("lJxs"),p=n("yk+R"),m=n("fXoL"),d=n("dJ3e"),u=n("DnKK"),g=n("pLZG"),f=n("uLmn"),h=n("L70B"),v=(n("orVE"),n("F+jL")),I=n("0IaG"),w=n("Wp6s"),b=n("bTqV"),y=n("NFeN");function x(t,e){if(1&t){const t=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",7),m["\u0275\u0275listener"]("click",(function(e){m["\u0275\u0275restoreView"](t);const n=m["\u0275\u0275nextContext"](2);return n.addToWishList(n.catalogItem.phone)})),m["\u0275\u0275elementStart"](1,"mat-icon"),m["\u0275\u0275text"](2,"favorite_border"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function C(t,e){if(1&t){const t=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",7),m["\u0275\u0275listener"]("click",(function(e){m["\u0275\u0275restoreView"](t);const n=m["\u0275\u0275nextContext"](2);return n.removeFromWishList(n.catalogItem.wishId)})),m["\u0275\u0275elementStart"](1,"mat-icon"),m["\u0275\u0275text"](2,"favorite"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function j(t,e){if(1&t){const t=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"mat-card",1),m["\u0275\u0275element"](1,"img",2),m["\u0275\u0275elementStart"](2,"div"),m["\u0275\u0275text"](3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"div"),m["\u0275\u0275text"](5),m["\u0275\u0275pipe"](6,"currency"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"div",3),m["\u0275\u0275elementStart"](8,"button",4),m["\u0275\u0275listener"]("click",(function(e){return m["\u0275\u0275restoreView"](t),m["\u0275\u0275nextContext"]().onBasketClick()})),m["\u0275\u0275elementStart"](9,"mat-icon"),m["\u0275\u0275text"](10,"shopping_cart"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275text"](11," \u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](12,x,3,0,"button",5),m["\u0275\u0275template"](13,C,3,0,"ng-template",null,6,m["\u0275\u0275templateRefExtractor"]),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&t){const t=m["\u0275\u0275reference"](14),e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("src",e.catalogItem.phone.image,m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.catalogItem.phone.name),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind3"](6,5,e.catalogItem.phone.price,"RUB","symbol-narrow")),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("ngIf",!e.catalogItem.isInWishList)("ngIfElse",t)}}let E=(()=>{class t{constructor(t,e){this.store=t,this.dialog=e}ngOnDestroy(){}onBasketClick(){this.dialog.open(v.a,{data:{phone:this.catalogItem.phone}}).afterClosed().pipe(Object(u.a)(this),Object(g.a)(t=>{var e;return!!(null===(e=t)||void 0===e?void 0:e.amount)}),Object(l.a)(t=>t.amount)).subscribe(t=>this.store.dispatch(new f.a(this.catalogItem.phone,t)))}addToWishList(t){this.store.dispatch(new h.a(t))}removeFromWishList(t){this.store.dispatch(new h.e(t))}}return t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275directiveInject"](c.f),m["\u0275\u0275directiveInject"](I.b))},t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:t,selectors:[["app-item-card"]],inputs:{catalogItem:"catalogItem"},decls:1,vars:1,consts:[["class","item-card",4,"ngIf"],[1,"item-card"],[3,"src"],[1,"item-card__actions"],["mat-raised-button","","color","primary",3,"click"],["mat-icon-button","","color","primary",3,"click",4,"ngIf","ngIfElse"],["inWishList",""],["mat-icon-button","","color","primary",3,"click"]],template:function(t,e){1&t&&m["\u0275\u0275template"](0,j,15,9,"mat-card",0),2&t&&m["\u0275\u0275property"]("ngIf",e.catalogItem)},directives:[i.l,w.a,b.a,y.a],pipes:[i.d],styles:[".item-card[_ngcontent-%COMP%]{font-size:16px;font-weight:500;line-height:25px;text-align:center;width:200px}.item-card__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}"],changeDetection:0}),t})();function _(t,e){if(1&t&&(m["\u0275\u0275elementStart"](0,"div",2),m["\u0275\u0275element"](1,"app-item-card",3),m["\u0275\u0275elementEnd"]()),2&t){const t=e.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("catalogItem",t)}}const k=[{path:"",component:(()=>{class t{constructor(t){this.phoneService=t,this.catalog$=Object(r.a)([this.phoneService.getPhones(),this.wishList$]).pipe(Object(l.a)(([t,e])=>t.map(t=>{var n;const i=e.find(e=>e.phone.id===t.id);return{phone:t,isInWishList:!!i,wishId:null===(n=i)||void 0===n?void 0:n.id}})))}}return t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275directiveInject"](d.c))},t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],decls:3,vars:3,consts:[[1,"catalog"],["class","catalog__item",4,"ngFor","ngForOf"],[1,"catalog__item"],[3,"catalogItem"]],template:function(t,e){1&t&&(m["\u0275\u0275elementStart"](0,"div",0),m["\u0275\u0275template"](1,_,2,1,"div",1),m["\u0275\u0275pipe"](2,"async"),m["\u0275\u0275elementEnd"]()),2&t&&(m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",m["\u0275\u0275pipeBind1"](2,1,e.catalog$)))},directives:[i.k,E],pipes:[i.b],styles:[".catalog[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.catalog__item[_ngcontent-%COMP%]{margin:20px}"],changeDetection:0}),Object(a.a)([Object(c.c)(p.a.wishList),Object(a.b)("design:type",s.a)],t.prototype,"wishList$",void 0),t})()}];let L=(()=>{class t{}return t.\u0275mod=m["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.c.forChild(k)],o.c]}),t})();var O=n("PCNd"),S=n("4bhA");n.d(e,"CatalogModule",(function(){return V}));let V=(()=>{class t{}return t.\u0275mod=m["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[d.c,d.a],imports:[[i.c,L,O.a,S.a]]}),t})()},orVE:function(t,e){}}]);